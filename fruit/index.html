<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>æ‰‹åŠ¿åˆ‡æ°´æœ</title>
  <style>
    body { margin: 0; padding: 0; background-color: #1a1a1a; overflow: hidden; font-family: 'Segoe UI', sans-serif; user-select: none; }
    
    #menu-container { 
        position: relative; width: 100vw; height: 100vh; 
        display: flex; justify-content: center; align-items: center; 
        /* === ä¿®æ”¹éƒ¨åˆ†ï¼šæ›´æ˜äº®ã€æ›´æœ‰æ´»åŠ›çš„èƒŒæ™¯ === */
        background: radial-gradient(circle at center, #4facfe 0%, #00f2fe 100%); 
        z-index: 1;
    }
    /* ä¸ºäº†é€‚é…äº®è‰²èƒŒæ™¯ï¼Œç¨å¾®åŠ æ·±æ°´æœèƒŒæ™¯çš„é€æ˜åº¦ */
    #bg-fruits-container {
        position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        overflow: hidden; pointer-events: none; z-index: 0;
    }
    .bg-fruit {
        position: absolute; font-size: 40px;
        opacity: 0.25; 
        user-select: none;
        animation: floatUp linear infinite, spin linear infinite;
        text-shadow: 0 0 5px rgba(255,255,255,0.3);
    }
    @keyframes floatUp {
        0% { transform: translateY(110vh) translateX(0); opacity: 0; }
        10% { opacity: 0.4; }
        90% { opacity: 0.4; }
        100% { transform: translateY(-10vh) translateX(20px); opacity: 0; }
    }
    @keyframes spin { 0% { rotate: 0deg; } 100% { rotate: 360deg; } }

    .menu-overlay { 
        position: absolute; width: 100%; height: 100%; z-index: 20; 
        background: rgba(0, 0, 0, 0.5); 
        display: flex; flex-direction: column; 
        justify-content: center; align-items: center; color: white; 
        backdrop-filter: blur(5px); pointer-events: auto; 
    }
    .hidden { display: none !important; }
    h1 { font-size: 60px; margin: 0 0 20px 0; color: #fff; text-shadow: 0 0 20px #f39c12; }
    
    .btn { 
        padding: 15px 40px; font-size: 24px; margin: 10px; width: 320px; 
        background: linear-gradient(45deg, #ff9966, #ff5e62); 
        color: white; border: none; 
        border-radius: 50px; cursor: pointer; box-shadow: 0 5px 15px rgba(255, 94, 98, 0.4); 
        font-weight: bold; transition: transform 0.2s; position: relative; overflow: hidden; 
    }
    .btn:hover { transform: scale(1.05); }
    .btn-simple { background: linear-gradient(45deg, #00c6ff, #0072ff); box-shadow: 0 5px 15px rgba(0, 114, 255, 0.4); }
    .btn-custom { background: linear-gradient(45deg, #11998e, #38ef7d); box-shadow: 0 5px 15px rgba(56, 239, 125, 0.4); }
    .btn-mystery { background: linear-gradient(45deg, #834d9b, #d04ed6); box-shadow: 0 5px 15px rgba(208, 78, 214, 0.4); border: 1px solid rgba(255,255,255,0.2); }
    .btn-secondary { background: rgba(255,255,255,0.2); width: auto; font-size: 20px; padding: 10px 30px; box-shadow: none; border: 1px solid rgba(255,255,255,0.3); }

    .hint-text { font-size: 14px; opacity: 0.9; margin-top: 5px; font-weight: normal; font-style: italic; }

    .btn-home {
        position: absolute; top: 20px; left: 20px;
        padding: 12px 25px; font-size: 18px;
        background: rgba(255, 255, 255, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.4);
        color: white; text-decoration: none;
        border-radius: 30px; transition: all 0.3s;
        z-index: 100; display: flex; align-items: center; gap: 8px;
        backdrop-filter: blur(5px); font-weight: bold;
    }
    .btn-home:hover { background: rgba(255, 255, 255, 0.4); transform: translateX(5px); box-shadow: 0 0 15px rgba(255, 255, 255, 0.3); }

    #custom-panel {
        background: rgba(0, 0, 0, 0.3); padding: 30px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.2);
        width: 400px;
    }
    .setting-row { margin-bottom: 20px; text-align: left; }
    .setting-label { display: flex; justify-content: space-between; margin-bottom: 5px; font-size: 18px; }
    input[type=range] { width: 100%; cursor: pointer; accent-color: #ff5e62; }
    .preview-score { text-align: center; font-size: 22px; margin-top: 20px; color: #f1c40f; font-weight: bold; }
  </style>
</head>
<body>

<div id="menu-container">
  <div id="bg-fruits-container"></div>
  <a href="../index.html" class="btn-home">â¬…ï¸ è¿”å›ä¸»é¡µ</a>

  <div id="start-screen" class="menu-overlay">
    <h1>ğŸ å¿è€…åˆ‡æ°´æœ ğŸ‰</h1>
    
    <button class="btn" onclick="startGame('NORMAL')">
      ğŸ”¥ æ™®é€šæ¨¡å¼
      <div class="hint-text">ç»å…¸ä½“éªŒ </div>
    </button>
    
    <button class="btn btn-simple" onclick="startGame('SIMPLE')">
      âœ¨ ç®€å•æ¨¡å¼
      <div class="hint-text">æ— ç‚¸å¼¹ </div>
    </button>
    
    <button class="btn btn-custom" onclick="showCustomPanel()">
      âš™ï¸ è‡ªå®šä¹‰æ¨¡å¼
      <div class="hint-text">è‡ªé€‰æ—¶é—´ä¸éš¾åº¦ | æŒ‘æˆ˜ç›®æ ‡åˆ†</div>
    </button>

    <button class="btn btn-mystery" onclick="startGame('MYSTERY')">
      ğŸ•µï¸â€â™‚ï¸ è§£å¯†æ¨¡å¼
      <div class="hint-text">æƒ³ä¸€æƒ³è¿˜å¯ä»¥åœ¨å“ªé‡Œæ‰¾åˆ°æœ‰ç”¨ä¿¡æ¯</div>
    </button>
  </div>

  <div id="custom-settings" class="menu-overlay hidden">
    <h2>âš™ï¸ è‡ªå®šä¹‰æŒ‘æˆ˜</h2>
    <div id="custom-panel">
        <div class="setting-row">
            <div class="setting-label"><span>â±ï¸ æ¸¸æˆæ—¶é—´</span><span id="disp-time">60s</span></div>
            <input type="range" id="rng-time" min="30" max="180" step="10" value="60" oninput="updateCustomPreview()">
        </div>
        <div class="setting-row">
            <div class="setting-label"><span>ğŸ’£ ç‚¸å¼¹é¢‘ç‡</span><span id="disp-bomb">0.5</span></div>
            <input type="range" id="rng-bomb" min="0" max="1" step="0.1" value="0.5" oninput="updateCustomPreview()">
        </div>
        <div class="setting-row">
            <div class="setting-label"><span>ğŸ‚ è›‹ç³•é¢‘ç‡</span><span id="disp-cake">0.5</span></div>
            <input type="range" id="rng-cake" min="0" max="1" step="0.1" value="0.5" oninput="updateCustomPreview()">
        </div>
        <div class="preview-score">ğŸ† ç›®æ ‡å¾—åˆ†: <span id="disp-target">0</span></div>
    </div>
    <div style="margin-top: 20px;">
        <button class="btn" onclick="startGame('CUSTOM')">å¼€å§‹æŒ‘æˆ˜</button>
        <button class="btn btn-secondary" onclick="hideCustomPanel()">è¿”å›</button>
    </div>
  </div>
</div>

<script>
  // ================== æ§åˆ¶å°å½©è›‹ (å·²æ¢å¤) ==================
  console.log("%c ğŸ” [è§£å¯†çº¿ç´¢] ä½ å‘ç°äº†è¿™é‡Œï¼\n%cè¿›å…¥ã€è§£å¯†æ¨¡å¼ã€‘éšè—å…³å¡çš„æ¡ä»¶æ˜¯ï¼š\nå½“ä½ åˆ‡åˆ°ç¬¬ 5 ä¸ªè›‹ç³•çš„é‚£ä¸€ç¬é—´ï¼Œä½ çš„åˆ†æ•°å¿…é¡»æ°å¥½ç”± <500 å˜ä¸º >=500ã€‚\n(ä½ éœ€è¦æ§åˆ¶åˆ‡æ™®é€šæ°´æœçš„æ•°é‡ï¼Œä¸è¦å¤ªé«˜ä¹Ÿä¸è¦å¤ªä½ï¼Œå¹¶åœ¨å…³é”®æ—¶åˆ»åˆ‡ä¸‹ç¬¬5ä¸ªè›‹ç³•)", "color: #e74c3c; font-size: 20px; font-weight: bold; text-shadow: 2px 2px black;", "color: #f1c40f; font-size: 14px; line-height: 1.5;");

  function initBackgroundFruits() {
      const container = document.getElementById('bg-fruits-container');
      const fruits = ['ğŸ','ğŸŠ','ğŸ‰','ğŸ¥','ğŸ¥¥','ğŸ‡','ğŸ','ğŸ‘','ğŸ’','ğŸ“'];
      const fruitCount = 15;
      for (let i = 0; i < fruitCount; i++) { createFloatingFruit(container, fruits); }
  }
  function createFloatingFruit(container, fruits) {
      const el = document.createElement('div');
      el.classList.add('bg-fruit');
      el.innerText = fruits[Math.floor(Math.random() * fruits.length)];
      el.style.left = Math.random() * 100 + 'vw';
      const size = 30 + Math.random() * 50;
      el.style.fontSize = size + 'px';
      const duration = 5 + Math.random() * 10;
      const delay = -Math.random() * 20;
      el.style.animationDuration = `${duration}s, ${duration * 1.5}s`;
      el.style.animationDelay = `${delay}s, ${delay}s`;
      container.appendChild(el);
  }
  initBackgroundFruits();

  function showCustomPanel() { document.getElementById('start-screen').classList.add('hidden'); document.getElementById('custom-settings').classList.remove('hidden'); updateCustomPreview(); }
  function hideCustomPanel() { document.getElementById('custom-settings').classList.add('hidden'); document.getElementById('start-screen').classList.remove('hidden'); }
  function updateCustomPreview() {
      const t = parseInt(document.getElementById('rng-time').value);
      const b = parseFloat(document.getElementById('rng-bomb').value);
      const c = parseFloat(document.getElementById('rng-cake').value);
      document.getElementById('disp-time').innerText = t + 's';
      document.getElementById('disp-bomb').innerText = b;
      document.getElementById('disp-cake').innerText = c;
      let target = Math.floor(t * 12 * (1 + c * 0.5) * (1 - b * 0.3));
      if(target < 100) target = 100;
      document.getElementById('disp-target').innerText = target;
  }
  function startGame(mode) {
    let url = `game.html?mode=${mode}`;
    if(mode === 'CUSTOM') {
        const t = document.getElementById('rng-time').value;
        const b = document.getElementById('rng-bomb').value;
        const c = document.getElementById('rng-cake').value;
        const target = document.getElementById('disp-target').innerText;
        url += `&time=${t}&bomb=${b}&cake=${c}&target=${target}`;
    }
    window.location.href = url;
  }
</script>
</body>
</html>